（字数约 1500—2000 字，可直接用于提交）

---

# **一、项目基本信息**
+ **项目名称：** 微博评论情感分析与可视化系统
+ **学生姓名：** XXX
+ **学号：** XXX
+ **所在班级：** XXX
+ **指导教师：** XXX
+ **所在小组成员与分工：**
    - A：总体架构设计、前端页面（Streamlit）
    - B：爬虫模块开发、数据清洗
    - C：情感分析模型封装、数据库设计
    - D：可视化与报告撰写（如有）

---

# **二、项目背景与研究意义**
随着微博等社交媒体成为重要的舆论场，用户对事件、品牌及社会话题的情绪表达具有显著的数据价值。企业、媒体与政府机构都依赖情绪分析来进行舆情监控、内容评估和危机管理。

然而微博评论量大、更新快、关注度高，人工筛选情绪成本高且难以实时。因此，构建一个能自动 **爬取微博评论 + 实时情绪分析 + 可视化呈现结果** 的系统具有以下重要意义：

1. **辅助内容创作者了解用户反馈与偏好**
2. **支持企业进行品牌舆情监控与危机预警**
3. **为研究者提供社会情绪变化的数据支持**
4. **帮助学生实践 B/S 架构、爬虫技术、NLP 模型与数据库系统**

本项目融合了互联网工程、自然语言处理、数据可视化与数据库设计，是一个综合性较强的课程设计题目，完全契合课程要求中“查阅资料、系统架构、实现核心功能”的阶段性目标。

---

# **三、需求分析**
根据课程设计任务书与小组讨论，本系统需实现如下功能模块：

### **（一）基本要求**
1. **评论数据获取**
    - 通过上传 CSV/XLSX/TXT 文件导入评论
    - 或通过系统爬虫从微博热帖中自动抓取评论
2. **文本情感分析**
    - 对输入文本进行多标签情绪分类
    - 支持单条文本即时分析
    - 支持爬取后批量分析
3. **可视化分析结果展示**
    - 情绪占比饼图
    - 评论关键词词云图
    - 评论列表与情绪标签一览
4. **数据存储与历史记录管理**
    - 使用数据库存储帖子信息、评论、情绪结果
    - 支持历史热帖分析回放
5. **良好的人机交互界面**
    - 网页端使用菜单导航，布局清晰，结果可视化直观。

---

### **（二）扩展（选做）功能要求**
1. **爬虫集成：输入微博 URL 即可自动获取评论**
2. **使用先进的文本情感分析模型（NLP / 深度学习）**
3. **界面风格美观、模块划分清晰、系统鲁棒性强**

目前项目已经完成了部分选做项内容。

---

# **四、实施方案论证**
为了实现上述目标，小组经过多轮讨论，形成如下实施方案：

---

## **（一）系统总体架构**
系统采用 **浏览器/服务器（B/S）架构**，前端以 Streamlit 为主，后端由 Python 模块提供逻辑处理，数据库采用 SQLite。

架构如下：

```plain
┌──────────┐
│  前端UI   │  Streamlit
└─────┬────┘
      │
┌─────▼───────────────────────────────┐
│           后端业务逻辑（Python）     │
│  ┌─────────────┐   ┌────────────┐   │
│  │  crawler.py │   │ sentiment.py│   │
│  └─────────────┘   └────────────┘   │
│          ┌────────────┐             │
│          │   db.py    │             │
│          └────────────┘             │
│          ┌────────────┐             │
│          │ utils.py   │             │
│          └────────────┘             │
└──────────────────────────────────────┘
```

---

## **（二）功能模块技术方案**
### **1. 爬虫模块（crawler.py）**
+ 使用 `requests.Session` 模拟微博移动端访问流程
+ 处理 visitor cookie（genvisitor/incarnate）
+ 调用 `m.weibo.cn` 接口抓取评论
+ 使用 `BeautifulSoup` 或正则进行数据清洗
+ 输出结构化 Comment 对象

**方案优点：** 轻量、高效、接口稳定。

---

### **2. 情感分析模块（sentiment.py）**
+ 使用 Hugging Face transformers
+ 模型：`IDEA-CCNL/Erlangshen-RoBERTa-330M-NLI`
+ 采用 zero-shot classification 实现六维度多标签情绪识别
+ 输出情绪概率与标签
+ 提供关键词词典作为离线兜底方案

**技术优势：**

+ 无需训练数据即可进行情绪分类
+ 模型适配中文语料
+ 扩展性强

---

### **3. 数据库模块（db.py）**
+ SQLite 轻量级数据库
+ 三张核心表：posts、comments、emotions
+ 支持：
    - 新增帖子与评论
    - 查询评论与情绪结果
    - 获取历史记录列表

**优势：**

+ 配置简单
+ 文件式存储适合课程设计
+ 可轻松迁移到 MySQL 等数据库

---

### **4. 可视化模块（utils.py）**
+ Matplotlib 绘制情绪分布饼图
+ WordCloud + jieba 绘制评论词云
+ 可扩展更多可视化图表，如柱状图、条形图、热力图等

---

### **5. Web 前端（app.py）**
+ 使用 Streamlit 实现四大功能页面：
    1. 微博 URL 分析
    2. 文本即时分析
    3. 文件批量分析
    4. 历史记录回放
+ 支持表格展示、图片展示、交互式输入等

---

# **五、当前进展情况**
截至中期：

| 模块 | 完成情况 | 说明 |
| --- | --- | --- |
| 系统需求分析 | √ | 完成文档编写 |
| 系统整体架构设计 | √ | 模块划分明确 |
| 爬虫模块 | √ | 完成 URL→评论数据获取 |
| 情感分析模块 | √ | 模型可运行，多标签识别可用 |
| 数据库模块 | √ | 已建表并可插入查询 |
| 可视化模块 | √ | 词云/饼图已实现 |
| 前端 UI | 进行中 | 四个页面构建已初步完成 |
| 系统联调 | 进行中 | 正在测试端到端流程 |


整体进度符合计划，具备按时完成的条件。

---

# **六、存在问题与解决方案**
| 存在问题 | 初步解决方案 |
| --- | --- |
| 微信微博风控导致爬虫可能失败 | 增加重试机制、随机 UA、请求延迟 |
| 模型加载速度较慢 | 缓存模型至本地，减少重复加载 |
| 大规模评论推理耗时过长 | 批量推理 + 控制 batch size，必要时启用 GPU |
| 词云受停用词影响大 | 增加自定义停用词表 |


---

# **七、后续工作计划（第 12–18 周）**
1. **前端界面优化**
    - 整体样式美化
    - 结果展示布局调整
2. **系统功能联调与测试**
    - 大规模数据测试
    - 异常输入处理
3. **数据库进一步完善**
    - 增加索引、唯一约束
4. **增加统计与分析维度（可选）**
    - 用户等级分析
    - 评论时间分布分析
5. **准备课程设计报告与答辩材料**

---

# **八、参考文献**
（示例，可根据需要补充）

1. Hugging Face Transformers 文档
2. IDEA-CCNL/Erlangshen 模型说明
3. Wang et al., _TESAN: An End-to-end Topic-Enhanced Self-Attention Network_
4. Zhang L., Wang S., Liu B. _Deep Learning for Sentiment Analysis_

---

# **九、结语**
目前项目各模块已基本完成，中期目标顺利达成。后续将在可视化、交互体验和系统可靠性方面进一步完善，最终实现一个能直接应用于微博舆情分析的完整系统。



